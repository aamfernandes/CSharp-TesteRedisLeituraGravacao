using System;
using System.Text;
using System.Threading;

namespace TesteRedis
{
    class Program
    {
        static void Main(string[] args)
        {
            CacheManagerRedis.removePattern("Pessoa:E*");

            StringBuilder texto = new StringBuilder();
            texto.AppendLine("Por que você usa?");
            texto.AppendLine("O texto de preenchimento Lorem ipum é utilizado por designers gráficos, programadores e impressoras com o objetivo de ocupar os espaços de um site, um produto publicitário ou uma produção editorial cujo texto final ainda não está pronto.");
            texto.AppendLine("Este expediente serve para ter uma idéia do produto final que em breve será impresso ou divulgado por canais digitais.");
            texto.AppendLine("Para ter um resultado que está de acordo com o resultado final, os designers gráficos, designers ou tipógrafos informam o texto de Lorem ipsum em relação a dois aspectos fundamentais, a saber, a legibilidade e os requisitos editoriais.");
            texto.AppendLine("A escolha da fonte e do tamanho da fonte com o qual o Lorem ipsum é reproduzido responde a necessidades específicas que vão além do preenchimento simples e simples de espaços dedicados a aceitar textos reais e que permitem a entrega de um produto publicitário / editorial, Tanto na web como no papel, é verdade à realidade.");
            texto.AppendLine("Seu absurdo permite que o olho se concentre apenas no layout gráfico que objetivamente avalie as escolhas estilísticas de um projeto, por isso é instalado em muitos programas gráficos em muitas plataformas de software de publicação pessoal e sistema de gerenciamento de conteúdo.");
            texto.AppendLine("");
            texto.AppendLine("Não é um Lorem Ipsum, mas seu Lorem Ipsum!");
            texto.AppendLine("Com o gerador de texto on - line você pode processar seu Lorem Ipsum rico em elementos html que definem sua estrutura, com a possibilidade de inserir links externos, mas não apenas.");
            texto.AppendLine("Agora, para compor um texto, o Lorem Ipsum é muito mais divertido!");
            texto.AppendLine("De fato, inserir qualquer texto de fantasia ou um texto famoso, seja um poema, um discurso, uma passagem literária, o texto de uma música, etc., nosso gerador de texto fornecerá a extração aleatória de termos e etapas para compor o seu exclusivo Lorem Ipsum.");
            texto.AppendLine("Seja original, teste sua imaginação... nosso gerador Lorem Ipsum irá surpreendê-lo.Experimente agora!");
            texto.AppendLine("Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur.Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.");
            texto.AppendLine("");
            texto.AppendLine("[{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EstruturaOrganizacional, OperacoesNewPoint','Id':2003,'Codigo':9248,'Descricao':'Principal','IdStatusObjeto':0,'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','RazaoSocial':'ABBF INFORMÁTICA LTDA ME','DiaAberturaPeriodo':1,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgHorarioVerao':0,'ExibirMsgFimHorarioVerao':0,'ChaveComprovantePonto':'db2baa34-305e-42e3-8715-79af28d6f4cb','ExibirInformativo':0,'QtdMesesPerido':0,'RamoAtividade':{ 'Id':98,'Codigo':95,'Descricao':'SERVIÇOS EM INFORMÁTICA'},'Id':518563,'Codigo':9248,'CnpjCpf':'09.248.270/0001-90','Telefone':'11991875393','Email':'aamfernandes@hotmail.com','Discriminador':'Empresa Matriz','Endereco':{ 'Id':2003,'EnderecoComposto':'Rua Irmã Pia, 97','Bairro':'Jaguaré','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':true,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'EstenderLGPD':false} },{ 'Id':5003,'Codigo':92481,'Descricao':'Financeiro','IdStatusObjeto':0,'EstruturaPai':{ 'Id':2003,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','RazaoSocial':'ABBF INFORMÁTICA LTDA ME','DiaAberturaPeriodo':1,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgHorarioVerao':0,'ExibirMsgFimHorarioVerao':0,'ChaveComprovantePonto':'db2baa34-305e-42e3-8715-79af28d6f4cb','ExibirInformativo':0,'QtdMesesPerido':0,'RamoAtividade':{ 'Id':98,'Codigo':95,'Descricao':'SERVIÇOS EM INFORMÁTICA'},'Id':518563,'Codigo':9248,'CnpjCpf':'09.248.270/0001-90','Telefone':'11991875393','Email':'aamfernandes@hotmail.com','Discriminador':'Empresa Matriz','Endereco':{ 'Id':2003,'EnderecoComposto':'Rua Irmã Pia, 97','Bairro':'Jaguaré','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':true,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'EstenderLGPD':false} },{ 'Id':6003,'Codigo':92482,'Descricao':'Pessoal','IdStatusObjeto':0,'EstruturaPai':{ 'Id':2003,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','RazaoSocial':'ABBF INFORMÁTICA LTDA ME','DiaAberturaPeriodo':1,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgHorarioVerao':0,'ExibirMsgFimHorarioVerao':0,'ChaveComprovantePonto':'db2baa34-305e-42e3-8715-79af28d6f4cb','ExibirInformativo':0,'QtdMesesPerido':0,'RamoAtividade':{ 'Id':98,'Codigo':95,'Descricao':'SERVIÇOS EM INFORMÁTICA'},'Id':518563,'Codigo':9248,'CnpjCpf':'09.248.270/0001-90','Telefone':'11991875393','Email':'aamfernandes@hotmail.com','Discriminador':'Empresa Matriz','Endereco':{ 'Id':2003,'EnderecoComposto':'Rua Irmã Pia, 97','Bairro':'Jaguaré','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':true,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'EstenderLGPD':false} }]");
            texto.AppendLine("[{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EstruturaOrganizacional, OperacoesNewPoint','Id':1,'Codigo':501048,'Descricao':'Principal','IdStatusObjeto':0,'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','QtdMesesPerido':0,'RazaoSocial':'HS COMÉRCIO & LOGÍSTICA LTDA','RamoAtividade':{ 'Id':4,'Codigo':1,'Descricao':'AGRICULTURA, PECUÁRIA, PRODUÇÃO FLORESTAL, PESCA E AQÜICULTURA'},'DiaAberturaPeriodo':24,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'ChaveComprovantePonto':'9C8B0E24-DFA6-4B91-B777-7A43A03723ED','Id':501048,'Codigo':501048,'CnpjCpf':'34.747.309/0001-61','Telefone':'11986452236','Email':'hs@dimep.com','Discriminador':'Empresa Matriz','EnderecoIpAtual':'192.168.173.146','Endereco':{ 'Id':1,'EnderecoComposto':'Rua teste','Bairro':'Teste','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','VersaoConnect':'5.2.8.0','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} },{ 'Id':1003,'Codigo':123,'CentroCusto':'21421','Descricao':'teste','IdStatusObjeto':0,'EstruturaPai':{ 'Id':1,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaFilial, OperacoesNewPoint','Descricao':'filial hs','Matriz':{ 'QtdMesesPerido':0,'DiaAberturaPeriodo':0,'ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'Id':501048,'Codigo':0,'Discriminador':'Empresa Matriz','UtilizaPortaria':true,'UtilizaPortaria671':true,'AnoAberturaFolhaPag':0,'EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'HorarioVerao':false,'EstenderLGPD':false},'Id':508095,'Codigo':234,'CnpjCpf':'12.529.910/0001-45','Telefone':'1231241','Discriminador':'Empresa Filial','Endereco':{ 'Id':1003,'EnderecoComposto':'rua teste','Bairro':'bairro teste','Cidade':'cidade teste','Estado':'sp'},'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} },{ 'Id':4003,'Codigo':500,'Descricao':'Secundária','IdStatusObjeto':0,'EstruturaPai':{ 'Id':1,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','QtdMesesPerido':0,'RazaoSocial':'HS COMÉRCIO & LOGÍSTICA LTDA','RamoAtividade':{ 'Id':4,'Codigo':1,'Descricao':'AGRICULTURA, PECUÁRIA, PRODUÇÃO FLORESTAL, PESCA E AQÜICULTURA'},'DiaAberturaPeriodo':24,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'ChaveComprovantePonto':'9C8B0E24-DFA6-4B91-B777-7A43A03723ED','Id':501048,'Codigo':501048,'CnpjCpf':'34.747.309/0001-61','Telefone':'11986452236','Email':'hs@dimep.com','Discriminador':'Empresa Matriz','EnderecoIpAtual':'192.168.173.146','Endereco':{ 'Id':1,'EnderecoComposto':'Rua teste','Bairro':'Teste','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','VersaoConnect':'5.2.8.0','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} },{ 'Id':4004,'Codigo':600,'Descricao':'Terciária','IdStatusObjeto':0,'EstruturaPai':{ 'Id':1,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','QtdMesesPerido':0,'RazaoSocial':'HS COMÉRCIO & LOGÍSTICA LTDA','RamoAtividade':{ 'Id':4,'Codigo':1,'Descricao':'AGRICULTURA, PECUÁRIA, PRODUÇÃO FLORESTAL, PESCA E AQÜICULTURA'},'DiaAberturaPeriodo':24,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'ChaveComprovantePonto':'9C8B0E24-DFA6-4B91-B777-7A43A03723ED','Id':501048,'Codigo':501048,'CnpjCpf':'34.747.309/0001-61','Telefone':'11986452236','Email':'hs@dimep.com','Discriminador':'Empresa Matriz','EnderecoIpAtual':'192.168.173.146','Endereco':{ 'Id':1,'EnderecoComposto':'Rua teste','Bairro':'Teste','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','VersaoConnect':'5.2.8.0','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} },{ 'Id':6006,'Codigo':700,'Descricao':'Financeiro','IdStatusObjeto':0,'EstruturaPai':{ 'Id':1,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','QtdMesesPerido':0,'RazaoSocial':'HS COMÉRCIO & LOGÍSTICA LTDA','RamoAtividade':{ 'Id':4,'Codigo':1,'Descricao':'AGRICULTURA, PECUÁRIA, PRODUÇÃO FLORESTAL, PESCA E AQÜICULTURA'},'DiaAberturaPeriodo':24,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'ChaveComprovantePonto':'9C8B0E24-DFA6-4B91-B777-7A43A03723ED','Id':501048,'Codigo':501048,'CnpjCpf':'34.747.309/0001-61','Telefone':'11986452236','Email':'hs@dimep.com','Discriminador':'Empresa Matriz','EnderecoIpAtual':'192.168.173.146','Endereco':{ 'Id':1,'EnderecoComposto':'Rua teste','Bairro':'Teste','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','VersaoConnect':'5.2.8.0','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} },{ 'Id':8003,'Codigo':6001,'Descricao':'Operacional','IdStatusObjeto':0,'EstruturaPai':{ 'Id':4004,'Codigo':0,'IdStatusObjeto':0},'Empresa':{ '__type':'lab.dev.newPoint.ServicoNewPoint.empresa.api.EmpresaMatriz, OperacoesNewPoint','QtdMesesPerido':0,'RazaoSocial':'HS COMÉRCIO & LOGÍSTICA LTDA','RamoAtividade':{ 'Id':4,'Codigo':1,'Descricao':'AGRICULTURA, PECUÁRIA, PRODUÇÃO FLORESTAL, PESCA E AQÜICULTURA'},'DiaAberturaPeriodo':24,'QtdPessoaLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','QtdUsuarioLicencaCripto':'EV4bYocTN2dYAwzFOvtKag==','ExibirMsgFimHorarioVerao':0,'ExibirMsgHorarioVerao':0,'ExibirInformativo':0,'ChaveComprovantePonto':'9C8B0E24-DFA6-4B91-B777-7A43A03723ED','Id':501048,'Codigo':501048,'CnpjCpf':'34.747.309/0001-61','Telefone':'11986452236','Email':'hs@dimep.com','Discriminador':'Empresa Matriz','EnderecoIpAtual':'192.168.173.146','Endereco':{ 'Id':1,'EnderecoComposto':'Rua teste','Bairro':'Teste','Cidade':'São Paulo','Estado':'SP','Pais':'Brasil'},'CalculoValido':false,'UtilizaPortaria':false,'UtilizaPortaria671':false,'AnoAberturaFolhaPag':0,'RegraNegocio':'BR','VersaoConnect':'5.2.8.0','EmpresaMigradaLight':false,'StatusMigracao':0,'PessoaStatusMigracao':0,'FusoHorario':{ 'Id':10,'Descricao':'UTC -3','Valor':-3},'HorarioVerao':false,'Latitude':'-23.4802475','Longitude':'-47.4589291','EstenderLGPD':false} }]");

            Console.WriteLine("Criando Chaves");
            for (int i = 1; i < 2000; i++)
            {
                string key = string.Format("Pessoa:{0}:{1}", "E99999", i);

                CacheManagerRedis.remove<String>(key);

                CacheManagerRedis.SetCompress<String>(key, texto.ToString());
            }


            Console.WriteLine("Lendo Chaves");
            for (int x = 1; x < 10000; x++)
            {
                Console.WriteLine("Executando: " + x.ToString());

                Thread.Sleep(10);
                for (int i = 1; i < 200; i++)
                {
                    string key = string.Format("Pessoa:{0}:{1}", "E99999", i);

                    string textoGet = CacheManagerRedis.GetCompress<String>(key, "");

                    CacheManagerRedis.SetCompress<String>(key, textoGet);
                    Thread.Sleep(10);
                }
            }

            Console.WriteLine("Apagando Chaves");
            CacheManagerRedis.removePattern("Pessoa:E*");
        }
    }
}
